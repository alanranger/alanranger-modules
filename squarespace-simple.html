<div id="ar-assessment">
  <style>
    #ar-assessment {
      border-left: 12px solid #E57200;
      padding-left: 18px;
      max-width: 880px;
      margin: 28px auto;
      background: #fff;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      color: #111;
    }
    
    #ar-assessment .card {
      background: #fff;
      border: 1px solid #e9e9e9;
      border-radius: 12px;
      padding: 18px 20px;
      margin: 24px 0;
      box-shadow: 0 2px 10px rgba(0,0,0,.06);
    }
    
    #ar-assessment .bar {
      border-left: 6px solid #E57200;
      background: #fafafa;
      padding: 18px 20px;
      margin: 24px 0;
      border-radius: 8px;
      box-shadow: 0 1px 4px rgba(0,0,0,.08);
    }
    
    #ar-assessment .qtitle {
      color: #E57200;
      font-weight: 700;
      margin: 0 0 6px 0;
    }
    
    #ar-assessment .btn {
      border: 0;
      border-radius: 10px;
      padding: 12px 16px;
      font-weight: 700;
      cursor: pointer;
      line-height: 1.1;
      transition: background .15s ease, opacity .15s ease, box-shadow .15s ease;
    }
    
    #ar-assessment .btn:disabled {
      opacity: .6;
      cursor: not-allowed;
    }
    
    #ar-assessment .btn-orange {
      background: #E57200;
      color: #fff;
    }
    
    #ar-assessment .btn-orange:hover {
      background: #cc6500;
    }
    
    #ar-assessment .btn-blue {
      background: #1e40af;
      color: #fff;
    }
    
    #ar-assessment .btn-green {
      background: #10b981;
      color: #fff;
    }
    
    #ar-assessment .btn-neutral {
      background: #fff;
      border: 1px solid #E57200;
      color: #E57200;
    }
    
    #ar-assessment .btn-neutral:hover {
      box-shadow: 0 0 0 2px rgba(229,114,0,.2) inset;
    }
    
    #ar-assessment .actions {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: center;
    }
    
    #ar-assessment .help {
      font-size: 12px;
      color: #6b7280;
      margin: 8px 0 0 0;
    }
    
    #ar-assessment .pill {
      display: inline-block;
      padding: 3px 10px;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      background: #fff;
      font-size: 12px;
    }
    
    #ar-assessment .pill.ok {
      background: #e8fff4;
      border-color: #b7f0d2;
      color: #067647;
      font-weight: 700;
    }
    
    #ar-assessment .pill.warn {
      background: #fff5f5;
      border-color: #fac5c5;
      color: #b42318;
      font-weight: 700;
    }
    
    #ar-assessment .radio-option {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      padding: 8px;
      border-radius: 6px;
      transition: background 0.15s ease;
    }
    
    #ar-assessment .radio-input {
      margin: 0;
      width: 16px;
      height: 16px;
      accent-color: #E57200;
    }
    
    #ar-assessment .radio-text {
      font-weight: 400;
      color: #111;
    }
    
    #ar-assessment #ar-toast {
      position: fixed;
      left: 50%;
      top: 22px;
      transform: translateX(-50%);
      z-index: 99999;
      background: #111;
      color: #fff;
      border-radius: 10px;
      padding: 10px 14px;
      display: none;
      box-shadow: 0 10px 24px rgba(0,0,0,.18);
    }
    
    #ar-assessment #ar-toast.ok {
      background: #10b981;
    }
    
    #ar-assessment #ar-toast.err {
      background: #ef4444;
    }
    
    #ar-assessment #ar-toast.info {
      background: #2563eb;
    }
  </style>
  
  <div class="bar">
    <div class="pill warn">Not signed in</div>
    <h2 style="margin:10px 0 0 0;color:#E57200;font-weight:700;">Module: Module 1: What is Exposure</h2>
    <div class="help">Progress: 0/5 questions answered</div>
  </div>
  
  <div class="card">
    <h3 class="qtitle">Sign in to save your progress</h3>
    <div style="display:flex;gap:8px;align-items:center;margin:12px 0;">
      <input type="email" id="email-input" placeholder="your@email.com" 
             style="flex:1;padding:8px 12px;border:1px solid #e9e9e9;border-radius:6px;">
      <button class="btn btn-orange" onclick="handleSignIn()">Send magic link</button>
    </div>
    <div class="help">We'll send you a secure link to sign in. No password required.</div>
  </div>
  
  <div class="card">
    <h3 class="qtitle">Question 1</h3>
    <p style="margin:8px 0 16px 0;">What is exposure in photography?</p>
    <div style="display:flex;flex-direction:column;gap:8px;">
      <label class="radio-option" onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='transparent'">
        <input type="radio" name="q0" value="0" onchange="handleAnswerChange(0, 0)" class="radio-input">
        <span class="radio-text">The amount of light that reaches the camera sensor</span>
      </label>
      <label class="radio-option" onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='transparent'">
        <input type="radio" name="q0" value="1" onchange="handleAnswerChange(0, 1)" class="radio-input">
        <span class="radio-text">The time it takes to take a photo</span>
      </label>
      <label class="radio-option" onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='transparent'">
        <input type="radio" name="q0" value="2" onchange="handleAnswerChange(0, 2)" class="radio-input">
        <span class="radio-text">The distance between the camera and subject</span>
      </label>
      <label class="radio-option" onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='transparent'">
        <input type="radio" name="q0" value="3" onchange="handleAnswerChange(0, 3)" class="radio-input">
        <span class="radio-text">The type of lens used</span>
      </label>
    </div>
  </div>
  
  <div class="card">
    <h3 class="qtitle">Question 2</h3>
    <p style="margin:8px 0 16px 0;">Which three elements control exposure?</p>
    <div style="display:flex;flex-direction:column;gap:8px;">
      <label class="radio-option" onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='transparent'">
        <input type="radio" name="q1" value="0" onchange="handleAnswerChange(1, 0)" class="radio-input">
        <span class="radio-text">ISO, Shutter Speed, and Aperture</span>
      </label>
      <label class="radio-option" onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='transparent'">
        <input type="radio" name="q1" value="1" onchange="handleAnswerChange(1, 1)" class="radio-input">
        <span class="radio-text">Focus, Zoom, and Flash</span>
      </label>
      <label class="radio-option" onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='transparent'">
        <input type="radio" name="q1" value="2" onchange="handleAnswerChange(1, 2)" class="radio-input">
        <span class="radio-text">White Balance, Contrast, and Saturation</span>
      </label>
      <label class="radio-option" onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='transparent'">
        <input type="radio" name="q1" value="3" onchange="handleAnswerChange(1, 3)" class="radio-input">
        <span class="radio-text">Resolution, Format, and Compression</span>
      </label>
    </div>
  </div>
  
  <div class="card">
    <h3 class="qtitle">Question 3</h3>
    <p style="margin:8px 0 16px 0;">What happens when you increase the ISO setting?</p>
    <div style="display:flex;flex-direction:column;gap:8px;">
      <label class="radio-option" onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='transparent'">
        <input type="radio" name="q2" value="0" onchange="handleAnswerChange(2, 0)" class="radio-input">
        <span class="radio-text">The image becomes more sensitive to light but may have more noise</span>
      </label>
      <label class="radio-option" onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='transparent'">
        <input type="radio" name="q2" value="1" onchange="handleAnswerChange(2, 1)" class="radio-input">
        <span class="radio-text">The image becomes less sensitive to light</span>
      </label>
      <label class="radio-option" onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='transparent'">
        <input type="radio" name="q2" value="2" onchange="handleAnswerChange(2, 2)" class="radio-input">
        <span class="radio-text">The image becomes sharper</span>
      </label>
      <label class="radio-option" onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='transparent'">
        <input type="radio" name="q2" value="3" onchange="handleAnswerChange(2, 3)" class="radio-input">
        <span class="radio-text">The image becomes more colorful</span>
      </label>
    </div>
  </div>
  
  <div class="card">
    <h3 class="qtitle">Question 4</h3>
    <p style="margin:8px 0 16px 0;">A faster shutter speed will:</p>
    <div style="display:flex;flex-direction:column;gap:8px;">
      <label class="radio-option" onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='transparent'">
        <input type="radio" name="q3" value="0" onchange="handleAnswerChange(3, 0)" class="radio-input">
        <span class="radio-text">Freeze motion and let in less light</span>
      </label>
      <label class="radio-option" onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='transparent'">
        <input type="radio" name="q3" value="1" onchange="handleAnswerChange(3, 1)" class="radio-input">
        <span class="radio-text">Blur motion and let in more light</span>
      </label>
      <label class="radio-option" onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='transparent'">
        <input type="radio" name="q3" value="2" onchange="handleAnswerChange(3, 2)" class="radio-input">
        <span class="radio-text">Increase depth of field</span>
      </label>
      <label class="radio-option" onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='transparent'">
        <input type="radio" name="q3" value="3" onchange="handleAnswerChange(3, 3)" class="radio-input">
        <span class="radio-text">Decrease image quality</span>
      </label>
    </div>
  </div>
  
  <div class="card">
    <h3 class="qtitle">Question 5</h3>
    <p style="margin:8px 0 16px 0;">What does a larger aperture (smaller f-number) do?</p>
    <div style="display:flex;flex-direction:column;gap:8px;">
      <label class="radio-option" onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='transparent'">
        <input type="radio" name="q4" value="0" onchange="handleAnswerChange(4, 0)" class="radio-input">
        <span class="radio-text">Lets in more light and creates a shallower depth of field</span>
      </label>
      <label class="radio-option" onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='transparent'">
        <input type="radio" name="q4" value="1" onchange="handleAnswerChange(4, 1)" class="radio-input">
        <span class="radio-text">Lets in less light and creates a deeper depth of field</span>
      </label>
      <label class="radio-option" onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='transparent'">
        <input type="radio" name="q4" value="2" onchange="handleAnswerChange(4, 2)" class="radio-input">
        <span class="radio-text">Makes the image sharper</span>
      </label>
      <label class="radio-option" onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='transparent'">
        <input type="radio" name="q4" value="3" onchange="handleAnswerChange(4, 3)" class="radio-input">
        <span class="radio-text">Reduces camera shake</span>
      </label>
    </div>
  </div>
  
  <div class="card">
    <div class="actions">
      <button class="btn btn-orange" onclick="submitAnswers()">Submit answers</button>
      <button class="btn btn-neutral" onclick="resetQuiz()">Reset</button>
      <button class="btn btn-blue" onclick="downloadResultsPDF()" disabled>Download results (PDF)</button>
      <button class="btn btn-green" onclick="downloadCertificatePDF()" disabled>Download certificate (PDF)</button>
      <button class="btn btn-neutral" onclick="saveResults()" disabled>Save to my account</button>
    </div>
    <div class="help">Answer all 5 questions to submit. Pass mark: 80%</div>
  </div>
  
  <div id="ar-toast" role="status" aria-live="polite"></div>
  
  <script>
    // Simple quiz state
    let quizAnswers = {};
    let isSubmitting = false;
    
    // Toast system
    function showToast(message, type = 'info') {
      const toast = document.getElementById('ar-toast');
      if (!toast) return;
      toast.textContent = message;
      toast.className = 'ar-toast ' + type;
      toast.style.display = 'block';
      setTimeout(function() { toast.style.display = 'none'; }, 5000);
    }
    
    // Quiz functions
    function calculateScore() {
      let correct = 0;
      const questions = [
        { correct: 0 },
        { correct: 0 },
        { correct: 0 },
        { correct: 0 },
        { correct: 0 }
      ];
      
      questions.forEach(function(q, i) {
        if (quizAnswers[i] === q.correct) correct++;
      });
      
      return Math.round((correct / questions.length) * 100);
    }
    
    function handleAnswerChange(questionIndex, answer) {
      quizAnswers[questionIndex] = answer;
      updateProgress();
    }
    
    function updateProgress() {
      const answered = Object.keys(quizAnswers).length;
      const total = 5;
      const progressElement = document.querySelector('.help');
      if (progressElement) {
        progressElement.textContent = 'Progress: ' + answered + '/' + total + ' questions answered';
      }
    }
    
    function resetQuiz() {
      quizAnswers = {};
      document.querySelectorAll('input[type="radio"]').forEach(function(radio) {
        radio.checked = false;
      });
      updateProgress();
      showToast('Quiz reset', 'info');
    }
    
    function submitAnswers() {
      if (isSubmitting) return;
      
      const answered = Object.keys(quizAnswers).length;
      const total = 5;
      
      if (answered < total) {
        showToast('Please answer all 5 questions before submitting.', 'err');
        return;
      }
      
      isSubmitting = true;
      const score = calculateScore();
      const passed = score >= 80;
      
      const results = [];
      for (let i = 0; i < 5; i++) {
        const isCorrect = quizAnswers[i] === 0; // All correct answers are 0
        results.push('Q' + (i + 1) + ': ' + (isCorrect ? 'Correct' : 'Incorrect'));
      }
      
      showToast('Quiz completed! Score: ' + score + '% ' + (passed ? '✅ Passed' : '❌ Failed'), passed ? 'ok' : 'warn');
      
      // Enable PDF buttons
      document.querySelector('button[onclick="downloadResultsPDF()"]').disabled = false;
      if (passed) {
        document.querySelector('button[onclick="downloadCertificatePDF()"]').disabled = false;
      }
      
      isSubmitting = false;
    }
    
    function handleSignIn() {
      const email = document.getElementById('email-input').value;
      if (!email || !email.includes('@')) {
        showToast('Please enter a valid email address', 'err');
        return;
      }
      showToast('Magic link sent! Check your email and click the link to sign in.', 'ok');
    }
    
    function saveResults() {
      showToast('Please sign in to save your results', 'warn');
    }
    
    function downloadResultsPDF() {
      showToast('PDF generation requires external libraries. Please use the full version.', 'warn');
    }
    
    function downloadCertificatePDF() {
      showToast('PDF generation requires external libraries. Please use the full version.', 'warn');
    }
    
    // Initialize
    updateProgress();
  </script>
</div>




